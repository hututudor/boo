(()=>{var gt=Object.defineProperty;var h=(e,t)=>{for(var n in t)gt(e,n,{get:t[n],enumerable:!0})};var i=(e,t,n)=>new Promise((r,a)=>{var d=u=>{try{s(n.next(u))}catch(p){a(p)}},l=u=>{try{s(n.throw(u))}catch(p){a(p)}},s=u=>u.done?r(u.value):Promise.resolve(u.value).then(d,l);s((n=n.apply(e,t)).next())});var y=()=>{let e=document.getElementsByClassName("book_card-image");for(let t of e){if(!t.dataset.src){console.warn("book without source found");continue}t.style.backgroundImage=`url(${t.dataset.src})`}};var D=()=>{let e=document.getElementsByClassName("form-file");for(let t of e){let n=t.getElementsByTagName("input")[0];if(!t.getElementsByTagName("input")[0]){console.error("file input not found");return}if(!t.getElementsByTagName("div")[0]){console.error("file display not found");return}t.addEventListener("click",ht),n.addEventListener("change",vt)}},vt=e=>{let t=e.currentTarget.parentElement,n=t.getElementsByTagName("div")[0],r=t.getElementsByTagName("input")[0];n.innerHTML=r.files[0].name},ht=e=>{e.currentTarget.getElementsByTagName("input")[0].click()};var H=e=>{if(e.split(".").length!==3)throw new Error("token is invalid");let[,t]=e.split(".");return JSON.parse(atob(t))};var N="token",C=()=>{let e=localStorage.getItem(N);if(!e)return!1;try{H(e)}catch(t){return Je(),!1}return!0},M=null,Oe=()=>{if(!C())return;if(M)return M;let e=localStorage.getItem(N);return e?(M=H(e).id,M):!1},q=null,je=()=>{if(!C())return!1;if(q)return q;let e=localStorage.getItem(N);return e?(q=H(e).isAdmin,q):!1},$=()=>{var e;return`Bearer ${(e=localStorage.getItem(N))!=null?e:""}`},Ve=()=>{q=null,M=null,localStorage.removeItem(N),location.reload()},S=()=>{C()||Je()},O=()=>{C()&&Ue()};var j=e=>{e&&(localStorage.setItem(N,e),Ue())},Je=()=>{localStorage.removeItem(N),goTo("./login")},Ue=()=>goTo("./");var Y={};h(Y,{load:()=>Et});var Et=()=>{c()};var ee={};h(ee,{load:()=>bt});var E="http://localhost:8000/www/api",L="http://localhost:8000/www";var Ge=n=>i(void 0,[n],function*({email:e,password:t}){let r=yield fetch(`${E}/auth/login`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),a=yield r.json();if(!r.ok)throw a;return a}),Ke=r=>i(void 0,[r],function*({email:e,name:t,password:n}){let a=yield fetch(`${E}/auth/register`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullName:t,email:e,password:n})}),d=yield a.json();if(!a.ok)throw d;return d});var V=()=>i(void 0,null,function*(){let e=yield fetch(`${E}/books`),t=yield e.json();if(!e.ok)throw t;return t}),J=e=>i(void 0,null,function*(){let t=yield fetch(`${E}/books/${e}`),n=yield t.json();if(!t.ok)throw n;return n}),We=e=>i(void 0,null,function*(){let t=yield fetch(`${E}/books/${e}/reviews`),n=yield t.json();if(!t.ok)throw n;return n}),ze=(n,r)=>i(void 0,[n,r],function*(e,{content:t}){let a=yield fetch(`${E}/books/${e}/reviews`,{method:"POST",body:JSON.stringify({content:t}),headers:{Authorization:$()}}),d=yield a.json();if(!a.ok)throw d;return null}),Ze=g=>i(void 0,[g],function*({name:e,author:t,description:n,isbn:r,pages:a,publisher:d,published:l,genre:s,format:u,image:p}){let b=yield fetch(`${E}/books`,{method:"POST",body:JSON.stringify({title:e,author:t,description:n,publisher:d,isbn:r,pages:a,image:p,genre:s,format:u,publication_date:l})}),v=yield b.json();if(!b.ok)throw v;return v}),Ye=b=>i(void 0,[b],function*({id:e,name:t,author:n,description:r,isbn:a,pages:d,publisher:l,published:s,genre:u,format:p,image:g}){let v=yield fetch(`${E}/books/${e}`,{method:"PUT",body:JSON.stringify({title:t,author:n,description:r,publisher:l,isbn:a,pages:d,image:g,genre:u,format:p,publication_date:s})}),F=yield v.json();if(!v.ok)throw F;return F}),Qe=e=>i(void 0,null,function*(){return fetch(`${E}/books/${e}`,{method:"DELETE"})}),U=e=>i(void 0,null,function*(){let t=new FormData;return t.append("file",e),(yield(yield fetch(`${E}/upload`,{method:"POST",body:t})).json()).file});var G=e=>i(void 0,null,function*(){return fetch(`${E}/reviews/${e}/`,{method:"DELETE",headers:{Authorization:$()}})}),Xe=()=>i(void 0,null,function*(){let e=yield fetch(`${E}/reviews`,{headers:{Authorization:$()}}),t=yield e.json();if(!e.ok)throw t;return t});var B={id:0,reviewId:0,contentTouched:!1},bt=()=>i(void 0,null,function*(){c(),y(),B.id=window.bookId;let e=yield J(B.id);Lt(e),X(),Bt(),Tt()}),X=()=>i(void 0,null,function*(){let e=yield We(B.id);yt(e)}),yt=e=>{let t=document.getElementsByClassName("book-reviews")[0];t.innerHTML="",e.forEach(n=>t.appendChild(K(n,It(n.id))))},Lt=e=>{document.getElementById("image").src=e.image,document.getElementById("author-mobile").innerHTML=e.author,document.getElementById("title-mobile").innerHTML=e.title,document.getElementById("author").innerHTML=e.author,document.getElementById("title").innerHTML=e.title,document.getElementById("description").innerHTML=e.description,document.getElementById("pages").innerHTML=e.pages,document.getElementById("isbn").innerHTML=e.isbn,document.getElementById("genre").innerHTML=e.genre,document.getElementById("publisher").innerHTML=e.publisher,document.getElementById("format").innerHTML=e.format,document.getElementById("published-date").innerHTML=e.publication_date},Bt=()=>{document.getElementById("delete-modal-cancel").addEventListener("click",et),document.getElementById("delete-modal-delete").addEventListener("click",wt)},It=e=>()=>{B.reviewId=e,A("delete-modal")},et=()=>{P("delete-modal")},wt=()=>i(void 0,null,function*(){yield G(B.reviewId),yield X(),et()}),Tt=()=>{let e=document.getElementById("content");e.addEventListener("keyup",Q),e.addEventListener("blur",xt("content")),e.addEventListener("blur",Q),document.getElementsByTagName("form")[0].addEventListener("submit",kt)},kt=()=>i(void 0,null,function*(){if(event.preventDefault(),_t(),![Q].map(n=>n()).every(n=>!!n))return;let t=document.querySelector('button[type="submit"]');I(t);try{yield ze(B.id,{content:document.getElementById("content").value}),B.contentTouched=!1,document.getElementById("content").value=""}finally{w(t)}yield X()}),Q=()=>{if(!B.contentTouched)return!0;let e=document.getElementById("content");return e.value?(o(e,""),!0):(o(e,"Message is required"),!1)},_t=()=>{B.contentTouched=!0},xt=e=>()=>{let t=`${e}Touched`;B[t]=!0};var ce={};h(ce,{load:()=>Nt});var f={nameTouched:!1,authorTouched:!1,descriptionTouched:!1,isbnTouched:!1,publisherTouched:!1,pagesTouched:!1,publishedTouched:!1,formatTouched:!1,genreTouched:!1,coverTouched:!1},Nt=()=>{c(),S(),D(),Ft()},Ft=()=>{let e=document.getElementById("name");e.addEventListener("keyup",te),e.addEventListener("blur",T("name")),e.addEventListener("blur",te);let t=document.getElementById("author");t.addEventListener("keyup",ne),t.addEventListener("blur",T("author")),t.addEventListener("blur",ne);let n=document.getElementById("description");n.addEventListener("keyup",re),n.addEventListener("blur",T("description")),n.addEventListener("blur",re);let r=document.getElementById("isbn");r.addEventListener("keyup",oe),r.addEventListener("blur",T("isbn")),r.addEventListener("blur",oe);let a=document.getElementById("publisher");a.addEventListener("keyup",ae),a.addEventListener("blur",T("publisher")),a.addEventListener("blur",ae);let d=document.getElementById("pages");d.addEventListener("keyup",se),d.addEventListener("blur",T("pages")),d.addEventListener("blur",se);let l=document.getElementById("published");l.addEventListener("keyup",de),l.addEventListener("blur",T("published")),l.addEventListener("blur",de);let s=document.getElementById("format");s.addEventListener("keyup",ie),s.addEventListener("blur",T("format")),s.addEventListener("blur",ie);let u=document.getElementById("genre");u.addEventListener("keyup",le),u.addEventListener("blur",T("genre")),u.addEventListener("blur",le);let p=document.getElementById("cover");p.addEventListener("change",ue),p.addEventListener("blur",T("cover")),p.addEventListener("blur",ue),document.getElementsByTagName("form")[0].addEventListener("submit",Ct)},Ct=e=>i(void 0,null,function*(){if(e.preventDefault(),St(),![te,ne,re,oe,ae,se,de,ie,le,ue].map(r=>r()).every(r=>!!r))return;let n=document.querySelector('button[type="submit"]');I(n);try{let r=yield U(cover.files[0]);yield Ze({name:document.getElementById("name").value,author:document.getElementById("author").value,description:document.getElementById("description").value,isbn:document.getElementById("isbn").value,publisher:document.getElementById("publisher").value,pages:document.getElementById("pages").value,published:document.getElementById("published").value,format:document.getElementById("format").value,genre:document.getElementById("genre").value,image:r})}finally{w(n)}goTo("../manager")}),te=()=>{if(!f.nameTouched)return!0;let e=document.getElementById("name");return e.value?(o(e,""),!0):(o(e,"Name is required"),!1)},ne=()=>{if(!f.authorTouched)return!0;let e=document.getElementById("author");return e.value?(o(e,""),!0):(o(e,"Author is required"),!1)},oe=()=>{if(!f.isbnTouched)return!0;let e=document.getElementById("isbn");return e.value?(o(e,""),!0):(o(e,"ISBN is required"),!1)},re=()=>{if(!f.descriptionTouched)return!0;let e=document.getElementById("description");return e.value?(o(e,""),!0):(o(e,"Description is required"),!1)},ae=()=>{if(!f.publisherTouched)return!0;let e=document.getElementById("publisher");return e.value?(o(e,""),!0):(o(e,"Publisher is required"),!1)},se=()=>{if(!f.pagesTouched)return!0;let e=document.getElementById("pages");return e.value?(o(e,""),!0):(o(e,"Pages is required"),!1)},de=()=>{if(!f.publishedTouched)return!0;let e=document.getElementById("published"),t=e.value;return t?/\d{2}.\d{2}.\d{4}/.test(t)?(o(e,""),!0):(o(e,"Published Date must have the format 23.10.2020"),!1):(o(e,"Published Date is required"),!1)},ie=()=>{if(!f.formatTouched)return!0;let e=document.getElementById("format");return e.value?(o(e,""),!0):(o(e,"Format is required"),!1)},le=()=>{if(!f.genreTouched)return!0;let e=document.getElementById("genre");return e.value?(o(e,""),!0):(o(e,"Genre is required"),!1)},ue=()=>{if(!f.coverTouched)return!0;let e=document.getElementById("cover");return e.value?(o(e,""),!0):(o(e,"Cover is required"),!1)},St=()=>{f.nameTouched=!0,f.authorTouched=!0,f.descriptionTouched=!0,f.isbnTouched=!0,f.publisherTouched=!0,f.pagesTouched=!0,f.publishedTouched=!0,f.formatTouched=!0,f.genreTouched=!0,f.coverTouched=!0},T=e=>()=>{let t=`${e}Touched`;f[t]=!0};var me={};h(me,{load:()=>At});var At=()=>{c(),y()};var Be={};h(Be,{load:()=>Pt});var m={nameTouched:!1,authorTouched:!1,descriptionTouched:!1,isbnTouched:!1,publisherTouched:!1,pagesTouched:!1,publishedTouched:!1,formatTouched:!1,genreTouched:!1,coverTouched:!1,bookId:0,bookImage:""},Pt=()=>i(void 0,null,function*(){c(),S(),D(),m.bookId=window.bookId;let e=yield J(m.bookId);Mt(e),m.bookImage=e.image,qt()}),Mt=({title:e,author:t,description:n,isbn:r,publisher:a,pages:d,publication_date:l,format:s,genre:u})=>{document.getElementById("name").value=e,document.getElementById("author").value=t,document.getElementById("description").value=n,document.getElementById("isbn").value=r,document.getElementById("publisher").value=a,document.getElementById("pages").value=d,document.getElementById("published").value=l,document.getElementById("genre").value=u,document.getElementById("format").value=s},qt=()=>{let e=document.getElementById("name");e.addEventListener("keyup",pe),e.addEventListener("blur",k("name")),e.addEventListener("blur",pe);let t=document.getElementById("author");t.addEventListener("keyup",fe),t.addEventListener("blur",k("author")),t.addEventListener("blur",fe);let n=document.getElementById("description");n.addEventListener("keyup",ve),n.addEventListener("blur",k("description")),n.addEventListener("blur",ve);let r=document.getElementById("isbn");r.addEventListener("keyup",ge),r.addEventListener("blur",k("isbn")),r.addEventListener("blur",ge);let a=document.getElementById("publisher");a.addEventListener("keyup",he),a.addEventListener("blur",k("publisher")),a.addEventListener("blur",he);let d=document.getElementById("pages");d.addEventListener("keyup",Ee),d.addEventListener("blur",k("pages")),d.addEventListener("blur",Ee);let l=document.getElementById("published");l.addEventListener("keyup",be),l.addEventListener("blur",k("published")),l.addEventListener("blur",be);let s=document.getElementById("format");s.addEventListener("keyup",ye),s.addEventListener("blur",k("format")),s.addEventListener("blur",ye);let u=document.getElementById("genre");u.addEventListener("keyup",Le),u.addEventListener("blur",k("genre")),u.addEventListener("blur",Le);let p=document.getElementById("cover");p.addEventListener("change",tt),p.addEventListener("change",k("cover")),document.getElementsByTagName("form")[0].addEventListener("submit",$t)},$t=e=>i(void 0,null,function*(){if(e.preventDefault(),Rt(),![pe,fe,ve,ge,he,Ee,be,ye,Le,...m.coverTouched?[tt]:[]].map(r=>r()).every(r=>!!r))return;let n=document.querySelector('button[type="submit"]');I(n);try{let r=m.coverTouched?yield U(cover.files[0]):m.bookImage;console.log({image:r,s:m.bookImage}),yield Ye({id:m.bookId,name:document.getElementById("name").value,author:document.getElementById("author").value,description:document.getElementById("description").value,isbn:document.getElementById("isbn").value,publisher:document.getElementById("publisher").value,pages:document.getElementById("pages").value,published:document.getElementById("published").value,format:document.getElementById("format").value,genre:document.getElementById("genre").value,image:r})}finally{w(n)}goTo("../manager")}),pe=()=>{if(!m.nameTouched)return!0;let e=document.getElementById("name");return e.value?(o(e,""),!0):(o(e,"Name is required"),!1)},fe=()=>{if(!m.authorTouched)return!0;let e=document.getElementById("author");return e.value?(o(e,""),!0):(o(e,"Author is required"),!1)},ge=()=>{if(!m.isbnTouched)return!0;let e=document.getElementById("isbn");return e.value?(o(e,""),!0):(o(e,"ISBN is required"),!1)},ve=()=>{if(!m.descriptionTouched)return!0;let e=document.getElementById("description");return e.value?(o(e,""),!0):(o(e,"Description is required"),!1)},he=()=>{if(!m.publisherTouched)return!0;let e=document.getElementById("publisher");return e.value?(o(e,""),!0):(o(e,"Publisher is required"),!1)},Ee=()=>{if(!m.pagesTouched)return!0;let e=document.getElementById("pages");return e.value?(o(e,""),!0):(o(e,"Pages is required"),!1)},be=()=>{if(!m.publishedTouched)return!0;let e=document.getElementById("published"),t=e.value;return t?/\d{2}.\d{2}.\d{4}/.test(t)?(o(e,""),!0):(o(e,"Published Date must have the format 23.10.2020"),!1):(o(e,"Published Date is required"),!1)},ye=()=>{if(!m.formatTouched)return!0;let e=document.getElementById("format");return e.value?(o(e,""),!0):(o(e,"Format is required"),!1)},Le=()=>{if(!m.genreTouched)return!0;let e=document.getElementById("genre");return e.value?(o(e,""),!0):(o(e,"Genre is required"),!1)},tt=()=>{if(!m.coverTouched)return!0;let e=document.getElementById("cover");return e.value?(o(e,""),!0):(o(e,"Cover is required"),!1)},Rt=()=>{m.nameTouched=!0,m.authorTouched=!0,m.descriptionTouched=!0,m.isbnTouched=!0,m.publisherTouched=!0,m.pagesTouched=!0,m.publishedTouched=!0,m.formatTouched=!0,m.genreTouched=!0},k=e=>()=>{let t=`${e}Touched`;m[t]=!0};var Ie={};h(Ie,{load:()=>Dt});var Dt=()=>{c(),y()};var we={};h(we,{load:()=>Ht});var nt={id:0},Ht=()=>i(void 0,null,function*(){c(),S(),jt(),yield ot()}),ot=()=>i(void 0,null,function*(){let e=yield V(),t=document.getElementsByClassName("books_manager-rows")[0];t.innerHTML="",e.forEach(n=>t.appendChild(Ot(n)))}),Ot=({id:e,title:t,author:n,genre:r})=>{let a=document.createElement("div"),d=document.createElement("div");d.innerHTML=e,d.classList.add("text"),d.classList.add("text__16");let l=document.createElement("div");l.innerHTML=t,l.classList.add("text"),l.classList.add("text__16");let s=document.createElement("div");s.innerHTML=n,s.classList.add("text"),s.classList.add("text__16");let u=document.createElement("div");u.innerHTML=r,u.classList.add("text"),u.classList.add("text__16"),u.classList.add("books_manager__mobile-hidden");let p=document.createElement("div");p.classList.add("text"),p.classList.add("text__16");let g=document.createElement("button");g.classList.add("button"),g.classList.add("button__icon"),g.classList.add("mr-2"),g.addEventListener("click",()=>goTo(`./manager/${e}`));let b=document.createElement("i");b.classList.add("fa"),b.classList.add("fa-edit"),g.appendChild(b);let v=document.createElement("button");v.classList.add("button"),v.classList.add("button__icon"),v.classList.add("button__red"),v.addEventListener("click",()=>{nt.id=e,Vt()});let F=document.createElement("i");return F.classList.add("fa"),F.classList.add("fa-trash"),v.appendChild(F),p.appendChild(g),p.appendChild(v),a.appendChild(d),a.appendChild(l),a.appendChild(s),a.appendChild(u),a.appendChild(p),a},jt=()=>{document.getElementById("delete-modal-cancel").addEventListener("click",rt),document.getElementById("delete-modal-delete").addEventListener("click",Jt)},Vt=()=>{A("delete-modal")},rt=()=>{P("delete-modal")},Jt=()=>i(void 0,null,function*(){yield Qe(nt.id),yield ot(),rt()});var Te={};h(Te,{load:()=>Ut});var Ut=()=>{c(),y()};var ke={};h(ke,{load:()=>Gt});var Gt=()=>i(void 0,null,function*(){c();let e=yield V(),t=document.getElementsByClassName("books")[0];e.forEach(n=>t.appendChild(at(n)))});var _e={};h(_e,{load:()=>Kt});var Kt=()=>{c()};var xe={};h(xe,{load:()=>Wt});var Wt=()=>{c()};var Ne={};h(Ne,{load:()=>zt});var zt=()=>{c(),y()};var Se={};h(Se,{load:()=>Zt});var W=e=>/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(e);var R={emailTouched:!1,passwordTouched:!1},Zt=()=>{O(),Yt()},Yt=()=>{let e=document.getElementById("email");e.addEventListener("keyup",Fe),e.addEventListener("blur",st("email")),e.addEventListener("blur",Fe);let t=document.getElementById("password");t.addEventListener("keyup",Ce),t.addEventListener("blur",st("password")),t.addEventListener("blur",Ce),document.getElementsByTagName("form")[0].addEventListener("submit",Qt)},Qt=e=>i(void 0,null,function*(){if(e.preventDefault(),Xt(),![Fe,Ce].map(l=>l()).every(l=>!!l))return;let n=document.querySelector('button[type="submit"]'),r=document.getElementById("email"),a=document.getElementById("password"),d=document.getElementsByTagName("form")[0];I(n);try{let{token:l}=yield Ge({email:r.value,password:a.value});j(l)}catch(l){z(d,l.message)}finally{w(n)}}),Fe=()=>{if(!R.emailTouched)return!0;let e=document.getElementById("email");return e.value?W(e.value)?(o(e,""),!0):(o(e,"Email must be valid"),!1):(o(e,"Email is required"),!1)},Ce=()=>{if(!R.passwordTouched)return!0;let e=document.getElementById("password");return e.value?(o(e,""),!0):(o(e,"Password is required"),!1)},Xt=()=>{R.emailTouched=!0,R.passwordTouched=!0},st=e=>()=>{let t=`${e}Touched`;R[t]=!0};var Ae={};h(Ae,{load:()=>en});var en=()=>{c()};var Re={};h(Re,{load:()=>tn});var _={nameTouched:!1,emailTouched:!1,passwordTouched:!1,confirmPasswordTouched:!1},tn=()=>{O(),nn()},nn=()=>{let e=document.getElementById("name");e.addEventListener("keyup",Pe),e.addEventListener("blur",Z("name")),e.addEventListener("blur",Pe);let t=document.getElementById("email");t.addEventListener("keyup",Me),t.addEventListener("blur",Z("email")),t.addEventListener("blur",Me);let n=document.getElementById("password");n.addEventListener("keyup",qe),n.addEventListener("blur",Z("password")),n.addEventListener("blur",qe);let r=document.getElementById("confirmPassword");r.addEventListener("keyup",$e),r.addEventListener("blur",Z("confirmPassword")),r.addEventListener("blur",$e),document.getElementsByTagName("form")[0].addEventListener("submit",on)},on=e=>i(void 0,null,function*(){if(e.preventDefault(),rn(),![Pe,Me,qe,$e].map(s=>s()).every(s=>!!s))return;let n=document.querySelector('button[type="submit"]'),r=document.getElementById("name"),a=document.getElementById("email"),d=document.getElementById("password"),l=document.getElementsByTagName("form")[0];I(n);try{let{token:s}=yield Ke({name:r.value,email:a.value,password:d.value});j(s)}catch(s){z(l,s.message)}finally{w(n)}}),Pe=()=>{if(!_.nameTouched)return!0;let e=document.getElementById("name");return e.value?(o(e,""),!0):(o(e,"Name is required"),!1)},Me=()=>{if(!_.emailTouched)return!0;let e=document.getElementById("email");return e.value?W(e.value)?(o(e,""),!0):(o(e,"Email must be valid"),!1):(o(e,"Email is required"),!1)},qe=()=>{if(!_.passwordTouched)return!0;let e=document.getElementById("password");return e.value?(o(e,""),!0):(o(e,"Password is required"),!1)},$e=()=>{if(!_.confirmPasswordTouched)return!0;let e=document.getElementById("confirmPassword"),t=e.value;return t?document.getElementById("password").value!==t?(o(e,"Password confirmation is incorrect"),!1):(o(e,""),!0):(o(e,"Confirm Password is required"),!1)},rn=()=>{_.nameTouched=!0,_.emailTouched=!0,_.passwordTouched=!0,_.confirmPasswordTouched=!0},Z=e=>()=>{let t=`${e}Touched`;_[t]=!0};var De={};h(De,{load:()=>an});var dt={reviewId:0},an=()=>i(void 0,null,function*(){c(),sn(),yield it()}),it=()=>i(void 0,null,function*(){let e=yield Xe(),t=document.getElementsByClassName("reviews")[0];t.innerHTML="",e.forEach(n=>t.appendChild(K(n,dn(n.id),!1)))}),sn=()=>{document.getElementById("delete-modal-cancel").addEventListener("click",lt),document.getElementById("delete-modal-delete").addEventListener("click",ln)},dn=e=>()=>{dt.reviewId=e,A("delete-modal")},lt=()=>{P("delete-modal")},ln=()=>i(void 0,null,function*(){yield G(dt.reviewId),yield it(),lt()});var ut={about:Y,book:ee,books_add:ce,books_author:me,books_edit:Be,books_genre:Ie,books_manager:we,books_search:Te,books:ke,help_questions:_e,help:xe,home:Ne,login:Se,profile:Ae,register:Re,reviews:De};var ct=()=>i(void 0,null,function*(){let e=x();if(!e){console.error("** PAGE UNKNOWN! Please add meta tag **");return}let t=ut[e];if(!t){console.error(`** PAGE CONFIG UNKNOWN! Page: ${e} **`);return}mt(),yield t.load(),pt()}),x=()=>{var e;return(e=document.querySelector('meta[name="page-name"]'))==null?void 0:e.getAttribute("content")};var un=[{name:"Home",icon:"fa-home",isActive:()=>x()==="home",onClick:()=>goTo(L+"/home")},{name:"Books",icon:"fa-book",isActive:()=>x()==="books",onClick:()=>goTo(L+"/")},{name:"Reviews",icon:"fa-comment",isActive:()=>x()==="reviews",onClick:()=>goTo(L+"/reviews")},{name:"Books Manager",icon:"fa-table",isActive:()=>x()==="books_manager",onClick:()=>goTo(L+"/manager")},{name:"About",icon:"fa-info-circle",isActive:()=>x()==="about",onClick:()=>goTo(L+"/about")},{name:"Help",icon:"fa-question-circle",isActive:()=>x()==="help",onClick:()=>goTo(L+"/help")}],cn=[{name:"Login",icon:"fa-user",isActive:()=>!1,onClick:()=>goTo(L+"/login")},{name:"Register",icon:"fa-user-plus",isActive:()=>!1,onClick:()=>goTo(L+"/register")}],mn=[{name:"Profile",icon:"fa-user-circle",isActive:()=>!1,onClick:()=>goTo(L+"/profile")},{name:"Logout",icon:"fa-sign-out",isActive:()=>!1,onClick:Ve}],c=()=>{var t;let e=(t=document.getElementsByClassName("side-links"))==null?void 0:t[0];e&&(un.forEach(n=>e.appendChild(He(n))),e.appendChild(pn()),C()?mn.forEach(n=>e.appendChild(He(n))):cn.forEach(n=>e.appendChild(He(n))),fn())},He=({onClick:e,isActive:t,name:n,icon:r})=>{let a=document.createElement("button");a.classList.add("side-link"),a.addEventListener("click",e),t()&&a.classList.add("side-link__active");let d=document.createElement("i");return d.classList.add("fa"),d.classList.add(r),a.appendChild(d),a.append(n),a},pn=()=>{let e=document.createElement("div");return e.classList.add("mt-3"),e},fn=()=>{document.getElementsByTagName("nav")[0].getElementsByTagName("button")[0].addEventListener("click",vn)},gn=()=>document.getElementsByTagName("aside")[0].classList.contains("side__show"),vn=()=>{gn()?En():hn()},hn=()=>{document.getElementsByTagName("aside")[0].classList.add("side__show"),document.getElementsByTagName("nav")[0].getElementsByTagName("i")[0].style.transform="rotateZ(180deg)"},En=()=>{document.getElementsByTagName("aside")[0].classList.remove("side__show"),document.getElementsByTagName("nav")[0].getElementsByTagName("i")[0].style.transform="rotateZ(0)"};var mt=()=>{let e=ft();if(!e){console.warn("no loading element on this page");return}e.classList.contains("loading__hidden")&&e.classList.remove("loading__hidden")},pt=()=>{let e=ft();if(!e){console.warn("no loading element on this page");return}e.classList.contains("loading__hidden")||e.classList.add("loading__hidden")},ft=()=>document.getElementById("loading");var o=(e,t)=>{e.parentNode.querySelector("span").innerHTML=t};var I=e=>{e.disabled=!0},w=e=>{e.disabled=!1};var z=(e,t)=>{e.querySelector("div[id=error]").innerHTML=t};var at=({id:e,image:t,title:n,author:r})=>{let a=document.createElement("div");a.classList.add("book_card-image"),a.style.backgroundImage=`url(${t})`;let d=document.createElement("div");d.classList.add("text"),d.classList.add("text__14"),d.classList.add("text__bold"),d.innerHTML=n;let l=document.createElement("div");l.classList.add("text"),l.classList.add("text__14"),l.innerHTML=r;let s=document.createElement("div");return s.classList.add("book_card"),s.addEventListener("click",()=>goTo(`./books/${e}`)),s.appendChild(a),s.appendChild(d),s.appendChild(l),s};var A=e=>{let t=document.getElementById(e);if(!t){console.warn(`no modal with id ${e} on this page`);return}t.classList.contains("modal__hidden")&&t.classList.remove("modal__hidden")},P=e=>{let t=document.getElementById(e);if(!t){console.warn(`no modal with id ${e} on this page`);return}t.classList.contains("modal__hidden")||t.classList.add("modal__hidden")};var K=({user:e,book:t,review_date:n,content:r,user_id:a},d,l=!0)=>{let s=document.createElement("div");s.classList.add("review");let u=document.createElement("div");u.classList.add("text"),u.classList.add("text__16"),u.classList.add("text__bold"),u.classList.add("mb-1"),l?u.innerHTML=`${e.fullName} - ${n}`:u.innerHTML=`${t.title} - ${n}`;let p=document.createElement("i");p.classList.add("fa"),p.classList.add("fa-trash");let g=document.createElement("button");g.classList.add("button"),g.classList.add("button__primary"),g.classList.add("button__red"),g.appendChild(p),g.addEventListener("click",d);let b=document.createElement("div");b.classList.add("flex"),b.classList.add("flex__justify-between"),b.classList.add("flex__align-center"),b.appendChild(u),(je()||Oe()==a)&&b.appendChild(g);let v=document.createElement("div");return v.classList.add("text"),v.classList.add("text__16"),v.innerHTML=r,s.appendChild(b),s.appendChild(v),s};document.addEventListener("DOMContentLoaded",ct);})();
//# sourceMappingURL=app.js.map
